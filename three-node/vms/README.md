
### VM's 3 Es Nodes 

- 3 x D16sv3 ES (a101,a102,a103)
- 1 x D16sv3 Kafka (a41)
- 1 x D16sv3 Spark (a1)
- 1 x D16sv3 Test (p1)

#### SparkJob

```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=1 \
--conf spark.cores.max=9 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101 9200 - - 3 true false true planes 60s 10000 0 false
```

#### Kafka Send

```
java -cp target/rttest.jar com.esri.rttest.send.Kafka a41:9092 planes3 planes00000 250000 50000000
```

#### ElasticIndexMon

```
java -cp target/rttest.jar com.esri.rttest.mon.ElasticIndexMon http://a101:9200/planes 10 12
```
Start Count: 0
Watching for changes in count...  Use Ctrl-C to Exit.

|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556808229836 |       0 |           77,813 |                  |                  |                  |
|          2 |       ***** |1556808239833 |       9 |           77,813 |                  |                  |                  |
|          3 |       ***** |1556808249833 |      19 |           77,813 |                  |                  |                  |
|          4 |       ***** |1556808259836 |      30 |           77,813 |                  |                  |                  |
|          5 |       ***** |1556808269834 |      39 |           77,813 |                  |                  |                  |
|          6 |       ***** |1556808279834 |      49 |           77,813 |                  |                  |                  |
|          7 |           2 |1556808289855 |      60 |        7,547,596 |          124,457 |          124,457 |          124,457 |
|          8 |       ***** |1556808299932 |      70 |        7,547,596 |          124,457 |                0 |          106,565 |
|          9 |       ***** |1556808309861 |      80 |        7,547,596 |          124,457 |                0 |           93,343 |
|         10 |       ***** |1556808319834 |      89 |        7,547,596 |          124,457 |                0 |           82,999 |
|         11 |       ***** |1556808329834 |      99 |        7,547,596 |          124,457 |                0 |           74,699 |
|         12 |       ***** |1556808339839 |     110 |        7,547,596 |          124,457 |                0 |           67,905 |
|         13 |           3 |1556808349834 |     119 |       14,751,061 |          122,279 |          120,100 |          122,279 |
|         14 |       ***** |1556808359835 |     129 |       14,751,061 |          122,279 |                0 |          112,872 |
|         15 |       ***** |1556808369834 |     139 |       14,751,061 |          122,279 |                0 |          104,810 |
|         16 |       ***** |1556808379838 |     150 |       14,751,061 |          122,279 |                0 |           97,820 |
|         17 |       ***** |1556808389835 |     159 |       14,751,061 |          122,279 |                0 |           91,708 |
|         18 |       ***** |1556808399835 |     169 |       14,751,061 |          122,279 |                0 |           86,314 |
|         19 |           4 |1556808409836 |     180 |       17,036,257 |           96,802 |           38,085 |           94,214 |
|         20 |           5 |1556808419841 |     190 |       21,644,733 |          103,298 |          460,617 |          113,507 |
|         21 |       ***** |1556808429838 |     200 |       21,644,733 |          103,298 |                0 |          107,834 |
|         22 |       ***** |1556808439837 |     210 |       21,644,733 |          103,298 |                0 |          102,699 |
|         23 |       ***** |1556808449839 |     220 |       21,644,733 |          103,298 |                0 |           98,030 |
|         24 |       ***** |1556808459839 |     230 |       21,644,733 |          103,298 |                0 |           93,768 |
|         25 |       ***** |1556808469841 |     240 |       21,644,733 |          103,298 |                0 |           89,860 |
|         26 |           6 |1556808479839 |     250 |       28,441,275 |          108,171 |          113,279 |          113,452 |
|         27 |       ***** |1556808489848 |     260 |       28,441,275 |          108,171 |                0 |          109,085 |
|         28 |       ***** |1556808499840 |     270 |       28,441,275 |          108,171 |                0 |          105,048 |
|         29 |       ***** |1556808509843 |     280 |       28,441,275 |          108,171 |                0 |          101,296 |
|         30 |       ***** |1556808519838 |     290 |       28,441,275 |          108,171 |                0 |           97,804 |
|         31 |       ***** |1556808529839 |     300 |       28,441,275 |          108,171 |                0 |           94,544 |
|         32 |           7 |1556808539841 |     310 |       35,295,660 |          110,953 |          114,236 |          113,604 |
|         33 |       ***** |1556808549838 |     320 |       35,295,660 |          110,953 |                0 |          110,055 |
|         34 |       ***** |1556808559842 |     330 |       35,295,660 |          110,953 |                0 |          106,719 |
|         35 |       ***** |1556808569841 |     340 |       35,295,660 |          110,953 |                0 |          103,580 |
|         36 |       ***** |1556808579864 |     350 |       35,295,660 |          110,953 |                0 |          100,614 |
|         37 |       ***** |1556808589840 |     360 |       35,295,660 |          110,953 |                0 |           97,826 |
|         38 |           8 |1556808599840 |     370 |       41,188,496 |          110,785 |           98,216 |          111,109 |
|         39 |       ***** |1556808609839 |     380 |       41,188,496 |          110,785 |                0 |          108,185 |
|         40 |       ***** |1556808619841 |     390 |       41,188,496 |          110,785 |                0 |          105,411 |
|         41 |       ***** |1556808629911 |     400 |       41,188,496 |          110,785 |                0 |          102,757 |
|         42 |       ***** |1556808639840 |     410 |       41,188,496 |          110,785 |                0 |          100,269 |
|         43 |       ***** |1556808649854 |     420 |       41,188,496 |          110,785 |                0 |           97,878 |
|         44 |           9 |1556808659843 |     430 |       47,235,506 |          109,902 |          100,778 |          109,667 |
|         45 |       ***** |1556808669840 |     440 |       47,235,506 |          109,902 |                0 |          107,176 |
|         46 |       ***** |1556808679841 |     450 |       47,235,506 |          109,902 |                0 |          104,794 |
|         47 |       ***** |1556808689845 |     460 |       47,235,506 |          109,902 |                0 |          102,515 |
|         48 |       ***** |1556808699842 |     470 |       47,235,506 |          109,902 |                0 |          100,334 |
|         49 |       ***** |1556808709842 |     480 |       47,235,506 |          109,902 |                0 |           98,244 |
|         50 |       ***** |1556808719842 |     490 |       47,235,506 |          109,902 |                0 |           96,239 |
|         51 |          10 |1556808729844 |     500 |       50,000,000 |          104,067 |           39,492 |           99,843 |
|         52 |       ***** |1556808739843 |     510 |       50,000,000 |          104,067 |                0 |           97,885 |
|         53 |       ***** |1556808749844 |     520 |       50,000,000 |          104,067 |                0 |           96,003 |
|         54 |       ***** |1556808759844 |     530 |       50,000,000 |          104,067 |                0 |           94,191 |
|         55 |       ***** |1556808769850 |     540 |       50,000,000 |          104,067 |                0 |           92,446 |
|         56 |       ***** |1556808779845 |     550 |       50,000,000 |          104,067 |                0 |           90,766 |
|         57 |       ***** |1556808789845 |     560 |       50,000,000 |          104,067 |                0 |           89,145 |
|         58 |       ***** |1556808799845 |     570 |       50,000,000 |          104,067 |                0 |           87,581 |
|         59 |       ***** |1556808809848 |     580 |       50,000,000 |          104,067 |                0 |           86,071 |
|         60 |       ***** |1556808819846 |     590 |       50,000,000 |          104,067 |                0 |           84,612 |
|         61 |       ***** |1556808829847 |     600 |       50,000,000 |          104,067 |                0 |           83,202 |
|         62 |       ***** |1556808839847 |     610 |       50,000,000 |          104,067 |                0 |           81,838 |

For last 120  seconds the count has not increased...

Removing sample: 620|50000000

Total Count: 50,000,000 | Linear Regression Rate:  109,902 | Linear Regression Standard Error: 3.39 | Average Rate: 109,667

#### KafkaTopicMon

```
java -cp target/rttest.jar com.esri.rttest.mon.KafkaTopicMon a41:9092 planes3
```

Watching for changes in count...  Use Ctrl-C to Exit.


|Sample Number|Epoch|Count|Linear Regression Rate|Approx. Instantaneous Rate|
|-------------|-----|-----|----------------------|--------------------------|
| 1 | 1556808221897 | 628397 |           |           |
| 2 | 1556808226896 | 1976957 | 269766 | 269766 |
| 3 | 1556808231896 | 3358375 | 273025 | 276284 |
| 4 | 1556808236896 | 4645008 | 268641 | 257327 |
| 5 | 1556808241896 | 5898772 | 264186 | 250753 |
| 6 | 1556808246900 | 7138614 | 260566 | 247770 |
| 7 | 1556808251896 | 8393715 | 258274 | 251221 |
| 8 | 1556808256897 | 9647144 | 256682 | 250636 |
| 9 | 1556808261897 | 10901438 | 255551 | 250859 |
| 10 | 1556808266898 | 12145177 | 254601 | 248698 |
| 11 | 1556808271899 | 13391341 | 253837 | 249183 |
| 12 | 1556808276899 | 14647115 | 253292 | 251155 |
| 13 | 1556808281901 | 15896043 | 252845 | 249686 |
| 14 | 1556808286901 | 17147989 | 252493 | 250389 |
| 15 | 1556808291901 | 18400281 | 252214 | 250458 |
| 16 | 1556808296900 | 19648971 | 251973 | 249788 |
| 17 | 1556808301900 | 20892993 | 251746 | 248804 |
| 18 | 1556808306901 | 22150189 | 251580 | 251389 |
| 19 | 1556808311901 | 23393268 | 251415 | 248616 |
| 20 | 1556808316902 | 24645643 | 251280 | 250425 |
| 21 | 1556808321902 | 25890116 | 251150 | 248895 |
| 22 | 1556808326902 | 27139771 | 251037 | 249931 |
| 23 | 1556808331901 | 28395449 | 250953 | 251186 |
| 24 | 1556808336902 | 29646197 | 250880 | 250100 |
| 25 | 1556808341902 | 30895433 | 250813 | 249847 |
| 26 | 1556808346902 | 32151992 | 250765 | 251312 |
| 27 | 1556808351902 | 33392144 | 250705 | 248030 |
| 28 | 1556808356903 | 34648573 | 250661 | 251236 |
| 29 | 1556808361903 | 35892301 | 250613 | 248746 |
| 30 | 1556808366903 | 37150342 | 250580 | 251608 |
| 31 | 1556808371903 | 38399706 | 250548 | 249873 |
| 32 | 1556808376903 | 39643711 | 250512 | 248801 |
| 33 | 1556808381903 | 40903494 | 250490 | 251957 |
| 34 | 1556808386903 | 42137161 | 250453 | 246733 |
| 35 | 1556808391906 | 43397852 | 250429 | 251987 |
| 36 | 1556808396904 | 44641167 | 250401 | 248763 |
| 37 | 1556808401904 | 45888400 | 250374 | 249447 |
| 38 | 1556808406904 | 47143348 | 250353 | 250990 |
| 39 | 1556808411904 | 48403691 | 250342 | 252069 |
| 40 | 1556808416904 | 49642430 | 250323 | 247748 |
| 41 | 1556808421905 | 50000000 | 249683 | 71500 |

Count is no longer increasing...

Removing sample: 1556808421905|50000000

Total Count: 50,000,000 | Linear Regression Rate:  250,323 | Average Rate: 251,345

### Sending to a101,a102,and a103

Changed spark job to send to all three es nodes intead of one.

#### SparkJob

```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=1 \
--conf spark.cores.max=9 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101,a102,a103 9200 - - 3 true false true planes 60s 10000 0 false
```

#### ElasticIndexMon

|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556809129855 |       0 |        3,122,118 |                  |                  |                  |
|          2 |       ***** |1556809139853 |       9 |        3,122,118 |                  |                  |                  |
|          3 |       ***** |1556809149853 |      19 |        3,122,118 |                  |                  |                  |
|          4 |       ***** |1556809159889 |      30 |        3,122,118 |                  |                  |                  |
|          5 |       ***** |1556809169854 |      39 |        3,122,118 |                  |                  |                  |
|          6 |       ***** |1556809179853 |      49 |        3,122,118 |                  |                  |                  |
|          7 |           2 |1556809189862 |      60 |       10,462,696 |          122,329 |          122,329 |          122,329 |
|          8 |       ***** |1556809199852 |      69 |       10,462,696 |          122,329 |                0 |          104,870 |
|          9 |       ***** |1556809209854 |      79 |       10,462,696 |          122,329 |                0 |           91,758 |
|         10 |       ***** |1556809219853 |      89 |       10,462,696 |          122,329 |                0 |           81,564 |
|         11 |       ***** |1556809229854 |      99 |       10,462,696 |          122,329 |                0 |           73,407 |
|         12 |       ***** |1556809239907 |     110 |       10,462,696 |          122,329 |                0 |           66,701 |
|         13 |           3 |1556809249858 |     120 |       17,719,975 |          121,646 |          120,963 |          121,646 |
|         14 |       ***** |1556809259854 |     129 |       17,719,975 |          121,646 |                0 |          112,292 |
|         15 |       ***** |1556809269853 |     139 |       17,719,975 |          121,646 |                0 |          104,272 |
|         16 |       ***** |1556809279854 |     149 |       17,719,975 |          121,646 |                0 |           97,320 |
|         17 |       ***** |1556809289939 |     160 |       17,719,975 |          121,646 |                0 |           91,189 |
|         18 |       ***** |1556809299855 |     170 |       17,719,975 |          121,646 |                0 |           85,870 |
|         19 |           4 |1556809309856 |     180 |       22,456,910 |          108,770 |           78,952 |          107,415 |
|         20 |           5 |1556809319875 |     190 |       24,846,467 |          110,392 |          238,503 |          114,327 |
|         21 |       ***** |1556809329859 |     200 |       24,846,467 |          110,392 |                0 |          108,620 |
|         22 |       ***** |1556809339854 |     209 |       24,846,467 |          110,392 |                0 |          103,450 |
|         23 |       ***** |1556809349855 |     220 |       24,846,467 |          110,392 |                0 |           98,747 |
|         24 |       ***** |1556809359859 |     230 |       24,846,467 |          110,392 |                0 |           94,452 |
|         25 |           6 |1556809369923 |     240 |       27,072,766 |          102,265 |           44,483 |           99,766 |
|         26 |           7 |1556809379857 |     250 |       31,545,662 |          105,832 |          450,261 |          113,693 |
|         27 |       ***** |1556809389857 |     260 |       31,545,662 |          105,832 |                0 |          109,320 |
|         28 |       ***** |1556809399856 |     270 |       31,545,662 |          105,832 |                0 |          105,272 |
|         29 |       ***** |1556809409895 |     280 |       31,545,662 |          105,832 |                0 |          101,498 |
|         30 |       ***** |1556809419856 |     290 |       31,545,662 |          105,832 |                0 |           98,012 |
|         31 |       ***** |1556809429857 |     300 |       31,545,662 |          105,832 |                0 |           94,745 |
|         32 |           8 |1556809439883 |     310 |       38,814,989 |          109,840 |          121,103 |          115,128 |
|         33 |       ***** |1556809449874 |     320 |       38,814,989 |          109,840 |                0 |          111,534 |
|         34 |       ***** |1556809459907 |     330 |       38,814,989 |          109,840 |                0 |          108,143 |
|         35 |       ***** |1556809469860 |     340 |       38,814,989 |          109,840 |                0 |          104,977 |
|         36 |       ***** |1556809479859 |     350 |       38,814,989 |          109,840 |                0 |          101,978 |
|         37 |       ***** |1556809489862 |     360 |       38,814,989 |          109,840 |                0 |           99,145 |
|         38 |           9 |1556809499859 |     370 |       45,770,126 |          112,519 |          115,965 |          115,264 |
|         39 |       ***** |1556809509859 |     380 |       45,770,126 |          112,519 |                0 |          112,230 |
|         40 |       ***** |1556809519861 |     390 |       45,770,126 |          112,519 |                0 |          109,352 |
|         41 |       ***** |1556809529886 |     400 |       45,770,126 |          112,519 |                0 |          106,612 |
|         42 |       ***** |1556809539859 |     410 |       45,770,126 |          112,519 |                0 |          104,019 |
|         43 |       ***** |1556809549861 |     420 |       45,770,126 |          112,519 |                0 |          101,541 |
|         44 |          10 |1556809559862 |     430 |       48,622,019 |          108,674 |           47,529 |          105,812 |
|         45 |          11 |1556809569863 |     440 |       50,000,000 |          107,206 |          137,784 |          106,539 |
|         46 |       ***** |1556809579861 |     450 |       50,000,000 |          107,206 |                0 |          104,172 |
|         47 |       ***** |1556809589860 |     460 |       50,000,000 |          107,206 |                0 |          101,907 |
|         48 |       ***** |1556809599860 |     470 |       50,000,000 |          107,206 |                0 |           99,739 |
|         49 |       ***** |1556809609863 |     480 |       50,000,000 |          107,206 |                0 |           97,661 |
|         50 |       ***** |1556809619862 |     490 |       50,000,000 |          107,206 |                0 |           95,668 |
|         51 |       ***** |1556809629861 |     500 |       50,000,000 |          107,206 |                0 |           93,755 |
|         52 |       ***** |1556809639861 |     510 |       50,000,000 |          107,206 |                0 |           91,916 |
|         53 |       ***** |1556809649862 |     520 |       50,000,000 |          107,206 |                0 |           90,149 |
|         54 |       ***** |1556809659861 |     530 |       50,000,000 |          107,206 |                0 |           88,448 |
|         55 |       ***** |1556809669862 |     540 |       50,000,000 |          107,206 |                0 |           86,810 |
|         56 |       ***** |1556809679862 |     550 |       50,000,000 |          107,206 |                0 |           85,231 |

For last 120  seconds the count has not increased...

Removing sample: 560|50000000

Total Count: 50,000,000 | Linear Regression Rate:  108,674 | Linear Regression Standard Error: 3.81 | Average Rate: 105,812

Observation: While running an ingest test checked the cpu usage on vm's.  The Kafka, Test, and Spark VM's showed less than 2 cores busy; the Elastic nodes were each at around 5 cores.  Nothing seems to be over taxed in terms of cpu.

### Spark Job with es.nodes params

#### SparkJob

Tried adding es.nodes parameters as below.

```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=3 \
--conf spark.cores.max=9 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.es.nodes.discovery=false \
--conf spark.es.nodes.data.only=false \
--conf spark.es.nodes.wan.only=true \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101 9200 - - 3 true false true planes 60s 10000 0 false
```


|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556810809881 |       0 |        2,084,709 |                  |                  |                  |
|          2 |       ***** |1556810819879 |       9 |        2,084,709 |                  |                  |                  |
|          3 |       ***** |1556810829880 |      19 |        2,084,709 |                  |                  |                  |
|          4 |       ***** |1556810839880 |      29 |        2,084,709 |                  |                  |                  |
|          5 |       ***** |1556810849903 |      40 |        2,084,709 |                  |                  |                  |
|          6 |       ***** |1556810859880 |      49 |        2,084,709 |                  |                  |                  |
|          7 |           2 |1556810869879 |      59 |        9,611,207 |          125,446 |          125,446 |          125,446 |
|          8 |       ***** |1556810879880 |      69 |        9,611,207 |          125,446 |                0 |          107,523 |
|          9 |       ***** |1556810889882 |      80 |        9,611,207 |          125,446 |                0 |           94,080 |
|         10 |       ***** |1556810899881 |      90 |        9,611,207 |          125,446 |                0 |           83,628 |
|         11 |       ***** |1556810909880 |      99 |        9,611,207 |          125,446 |                0 |           75,266 |
|         12 |       ***** |1556810919910 |     110 |        9,611,207 |          125,446 |                0 |           68,405 |
|         13 |       ***** |1556810929883 |     120 |        9,611,207 |          125,446 |                0 |           62,720 |
|         14 |           3 |1556810939881 |     130 |       16,398,237 |          109,742 |           96,955 |          110,104 |
|         15 |       ***** |1556810949998 |     140 |       16,398,237 |          109,742 |                0 |          102,154 |
|         16 |       ***** |1556810959881 |     150 |       16,398,237 |          109,742 |                0 |           95,424 |
|         17 |       ***** |1556810969882 |     160 |       16,398,237 |          109,742 |                0 |           89,459 |
|         18 |       ***** |1556810979881 |     170 |       16,398,237 |          109,742 |                0 |           84,197 |
|         19 |       ***** |1556810989881 |     180 |       16,398,237 |          109,742 |                0 |           79,520 |
|         20 |           4 |1556810999881 |     190 |       23,517,843 |          110,911 |          118,660 |          112,806 |
|         21 |       ***** |1556811009882 |     200 |       23,517,843 |          110,911 |                0 |          107,165 |
|         22 |       ***** |1556811019882 |     210 |       23,517,843 |          110,911 |                0 |          102,062 |
|         23 |       ***** |1556811029881 |     220 |       23,517,843 |          110,911 |                0 |           97,423 |
|         24 |       ***** |1556811039881 |     230 |       23,517,843 |          110,911 |                0 |           93,188 |
|         25 |       ***** |1556811049883 |     240 |       23,517,843 |          110,911 |                0 |           89,304 |
|         26 |           5 |1556811059904 |     250 |       29,960,010 |          110,484 |          107,328 |          111,491 |
|         27 |       ***** |1556811069945 |     260 |       29,960,010 |          110,484 |                0 |          107,186 |
|         28 |       ***** |1556811079882 |     270 |       29,960,010 |          110,484 |                0 |          103,241 |
|         29 |       ***** |1556811089883 |     280 |       29,960,010 |          110,484 |                0 |           99,554 |
|         30 |       ***** |1556811099883 |     290 |       29,960,010 |          110,484 |                0 |           96,121 |
|         31 |       ***** |1556811109883 |     300 |       29,960,010 |          110,484 |                0 |           92,917 |
|         32 |           6 |1556811119957 |     310 |       36,561,342 |          110,281 |          109,925 |          111,188 |
|         33 |       ***** |1556811129886 |     320 |       36,561,342 |          110,281 |                0 |          107,738 |
|         34 |       ***** |1556811139885 |     330 |       36,561,342 |          110,281 |                0 |          104,473 |
|         35 |       ***** |1556811149886 |     340 |       36,561,342 |          110,281 |                0 |          101,400 |
|         36 |       ***** |1556811159911 |     350 |       36,561,342 |          110,281 |                0 |           98,496 |
|         37 |       ***** |1556811169887 |     360 |       36,561,342 |          110,281 |                0 |           95,767 |
|         38 |           7 |1556811179904 |     370 |       43,051,429 |          109,999 |          108,264 |          110,714 |
|         39 |       ***** |1556811189885 |     380 |       43,051,429 |          109,999 |                0 |          107,806 |
|         40 |       ***** |1556811199888 |     390 |       43,051,429 |          109,999 |                0 |          105,041 |
|         41 |       ***** |1556811209900 |     400 |       43,051,429 |          109,999 |                0 |          102,412 |
|         42 |       ***** |1556811219894 |     410 |       43,051,429 |          109,999 |                0 |           99,916 |
|         43 |       ***** |1556811229886 |     420 |       43,051,429 |          109,999 |                0 |           97,539 |
|         44 |           8 |1556811239907 |     430 |       47,245,518 |          106,655 |           69,898 |          105,019 |
|         45 |           9 |1556811249889 |     440 |       49,331,240 |          106,213 |          208,948 |          107,377 |
|         46 |       ***** |1556811259888 |     450 |       49,331,240 |          106,213 |                0 |          104,991 |
|         47 |       ***** |1556811269888 |     460 |       49,331,240 |          106,213 |                0 |          102,708 |
|         48 |       ***** |1556811279909 |     470 |       49,331,240 |          106,213 |                0 |          100,519 |
|         49 |       ***** |1556811289922 |     480 |       49,331,240 |          106,213 |                0 |           98,422 |
|         50 |          10 |1556811299887 |     490 |       52,815,799 |          104,362 |           69,694 |          103,532 |
|         51 |          11 |1556811309888 |     500 |       54,567,543 |          103,807 |          175,157 |          104,964 |
|         52 |       ***** |1556811319888 |     510 |       54,567,543 |          103,807 |                0 |          102,906 |
|         53 |       ***** |1556811329890 |     520 |       54,567,543 |          103,807 |                0 |          100,927 |
|         54 |       ***** |1556811339887 |     530 |       54,567,543 |          103,807 |                0 |           99,023 |
|         55 |       ***** |1556811349887 |     540 |       54,567,543 |          103,807 |                0 |           97,189 |
|         56 |          12 |1556811359887 |     550 |       56,171,687 |          101,082 |           32,084 |           98,339 |
|         57 |          13 |1556811369890 |     560 |       59,300,542 |          100,500 |          312,792 |          102,169 |
|         58 |       ***** |1556811379888 |     570 |       59,300,542 |          100,500 |                0 |          100,377 |
|         59 |       ***** |1556811389887 |     580 |       59,300,542 |          100,500 |                0 |           98,647 |
|         60 |       ***** |1556811399888 |     590 |       59,300,542 |          100,500 |                0 |           96,975 |
|         61 |       ***** |1556811409890 |     600 |       59,300,542 |          100,500 |                0 |           95,358 |
|         62 |          14 |1556811419888 |     610 |       59,327,036 |           97,450 |              530 |           93,839 |
|         63 |       ***** |1556811429889 |     620 |       59,327,036 |           97,450 |                0 |           92,325 |
|         64 |       ***** |1556811439889 |     630 |       59,327,036 |           97,450 |                0 |           90,860 |
|         65 |       ***** |1556811449891 |     640 |       59,327,036 |           97,450 |                0 |           89,440 |
|         66 |       ***** |1556811459889 |     650 |       59,327,036 |           97,450 |                0 |           88,064 |
|         67 |       ***** |1556811469888 |     660 |       59,327,036 |           97,450 |                0 |           86,730 |
|         68 |       ***** |1556811479890 |     670 |       59,327,036 |           97,450 |                0 |           85,435 |
|         69 |       ***** |1556811489895 |     680 |       59,327,036 |           97,450 |                0 |           84,178 |
|         70 |       ***** |1556811499889 |     690 |       59,327,036 |           97,450 |                0 |           82,959 |
|         71 |       ***** |1556811509889 |     700 |       59,327,036 |           97,450 |                0 |           81,774 |
|         72 |       ***** |1556811519889 |     710 |       59,327,036 |           97,450 |                0 |           80,622 |
|         73 |       ***** |1556811529891 |     720 |       59,327,036 |           97,450 |                0 |           79,502 |

For last 120  seconds the count has not increased...

Removing sample: 730|59327036

Total Count: 59,327,036 | Linear Regression Rate:  100,500 | Linear Regression Standard Error: 2.19 | Average Rate: 102,169


### Added two more spark nodes

- 3 D16Sv3 - Elasticsearch a101,a102,a103
- 1 D16Sv3 - Kafka a41
- 3 D16Sv3 - Spark a1,a2,a3
- 1 D16sv3 - Test p1


```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=1 \
--conf spark.cores.max=9 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101,a102,a103 9200 - - 3 true false true planes 60s 10000 0 false
```

#### ElasticIndexMon

```
java -cp target/rttest.jar com.esri.rttest.mon.ElasticIndexMon http://a101:9200/planes 10 12
```

Start Count: 0

Watching for changes in count...  Use Ctrl-C to Exit.

|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556813147895 |       0 |        3,711,142 |                  |                  |                  |
|          2 |       ***** |1556813157859 |       9 |        3,711,142 |                  |                  |                  |
|          3 |       ***** |1556813167857 |      19 |        3,711,142 |                  |                  |                  |
|          4 |       ***** |1556813177858 |      29 |        3,711,142 |                  |                  |                  |
|          5 |       ***** |1556813187857 |      39 |        3,711,142 |                  |                  |                  |
|          6 |       ***** |1556813197859 |      49 |        3,711,142 |                  |                  |                  |
|          7 |           2 |1556813207904 |      60 |        8,784,403 |           84,542 |           84,542 |           84,542 |
|          8 |           3 |1556813217858 |      69 |       11,321,757 |          100,310 |          254,908 |          108,781 |
|          9 |       ***** |1556813227901 |      80 |       11,321,757 |          100,310 |                0 |           95,126 |
|         10 |       ***** |1556813237860 |      89 |       11,321,757 |          100,310 |                0 |           84,595 |
|         11 |       ***** |1556813247858 |      99 |       11,321,757 |          100,310 |                0 |           76,134 |
|         12 |       ***** |1556813257858 |     109 |       11,321,757 |          100,310 |                0 |           69,211 |
|         13 |       ***** |1556813267859 |     119 |       11,321,757 |          100,310 |                0 |           63,441 |
|         14 |           4 |1556813277859 |     129 |       18,201,551 |          112,331 |          114,661 |          111,496 |
|         15 |       ***** |1556813287858 |     139 |       18,201,551 |          112,331 |                0 |          103,530 |
|         16 |       ***** |1556813297859 |     149 |       18,201,551 |          112,331 |                0 |           96,626 |
|         17 |       ***** |1556813307858 |     159 |       18,201,551 |          112,331 |                0 |           90,586 |
|         18 |       ***** |1556813317863 |     169 |       18,201,551 |          112,331 |                0 |           85,254 |
|         19 |       ***** |1556813327870 |     179 |       18,201,551 |          112,331 |                0 |           80,513 |
|         20 |           5 |1556813337860 |     189 |       25,374,729 |          116,288 |          119,551 |          114,040 |
|         21 |       ***** |1556813347909 |     200 |       25,374,729 |          116,288 |                0 |          108,310 |
|         22 |       ***** |1556813357865 |     209 |       25,374,729 |          116,288 |                0 |          103,175 |
|         23 |       ***** |1556813367862 |     219 |       25,374,729 |          116,288 |                0 |           98,486 |
|         24 |       ***** |1556813377862 |     229 |       25,374,729 |          116,288 |                0 |           94,203 |
|         25 |       ***** |1556813387862 |     239 |       25,374,729 |          116,288 |                0 |           90,277 |
|         26 |           6 |1556813397863 |     249 |       32,440,298 |          117,413 |          117,754 |          114,931 |
|         27 |       ***** |1556813407862 |     259 |       32,440,298 |          117,413 |                0 |          110,511 |
|         28 |       ***** |1556813417862 |     269 |       32,440,298 |          117,413 |                0 |          106,417 |
|         29 |       ***** |1556813427862 |     279 |       32,440,298 |          117,413 |                0 |          102,616 |
|         30 |       ***** |1556813437864 |     289 |       32,440,298 |          117,413 |                0 |           99,077 |
|         31 |       ***** |1556813447863 |     299 |       32,440,298 |          117,413 |                0 |           95,774 |
|         32 |           7 |1556813457863 |     309 |       37,003,330 |          112,211 |           76,051 |          107,405 |
|         33 |           8 |1556813467862 |     319 |       39,253,927 |          112,195 |          225,082 |          111,083 |
|         34 |       ***** |1556813477867 |     329 |       39,253,927 |          112,195 |                0 |          107,715 |
|         35 |       ***** |1556813487864 |     339 |       39,253,927 |          112,195 |                0 |          104,547 |
|         36 |       ***** |1556813497898 |     350 |       39,253,927 |          112,195 |                0 |          101,550 |
|         37 |       ***** |1556813507864 |     359 |       39,253,927 |          112,195 |                0 |           98,738 |
|         38 |           9 |1556813517865 |     369 |       43,446,688 |          110,330 |           83,850 |          107,402 |
|         39 |          10 |1556813527864 |     379 |       45,630,391 |          110,484 |          218,392 |          110,323 |
|         40 |       ***** |1556813537865 |     389 |       45,630,391 |          110,484 |                0 |          107,494 |
|         41 |       ***** |1556813547868 |     399 |       45,630,391 |          110,484 |                0 |          104,805 |
|         42 |       ***** |1556813557867 |     409 |       45,630,391 |          110,484 |                0 |          102,249 |
|         43 |       ***** |1556813567864 |     419 |       45,630,391 |          110,484 |                0 |           99,815 |
|         44 |          11 |1556813577865 |     429 |       47,173,966 |          106,867 |           30,871 |          101,083 |
|         45 |          12 |1556813587865 |     439 |       50,000,000 |          106,089 |          282,603 |          105,209 |
|         46 |       ***** |1556813597869 |     449 |       50,000,000 |          106,089 |                0 |          102,870 |
|         47 |       ***** |1556813607866 |     459 |       50,000,000 |          106,089 |                0 |          100,634 |
|         48 |       ***** |1556813617865 |     469 |       50,000,000 |          106,089 |                0 |           98,493 |
|         49 |       ***** |1556813627865 |     479 |       50,000,000 |          106,089 |                0 |           96,441 |
|         50 |       ***** |1556813637866 |     489 |       50,000,000 |          106,089 |                0 |           94,473 |
|         51 |       ***** |1556813647866 |     499 |       50,000,000 |          106,089 |                0 |           92,583 |
|         52 |       ***** |1556813657866 |     509 |       50,000,000 |          106,089 |                0 |           90,768 |
|         53 |       ***** |1556813667869 |     519 |       50,000,000 |          106,089 |                0 |           89,021 |
|         54 |       ***** |1556813677868 |     529 |       50,000,000 |          106,089 |                0 |           87,342 |
|         55 |       ***** |1556813687866 |     539 |       50,000,000 |          106,089 |                0 |           85,725 |
|         56 |       ***** |1556813697866 |     549 |       50,000,000 |          106,089 |                0 |           84,166 |

For last 120  seconds the count has not increased...

Removing sample: 559|50000000

Total Count: 50,000,000 | Linear Regression Rate:  106,867 | Linear Regression Standard Error: 2.95 | Average Rate: 101,083


### Change number cores/max

Using four Cores and and 12 max

```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=4 \
--conf spark.cores.max=12 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101,a102,a103 9200 - - 3 true false true planes 60s 10000 0 false
```


|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556813897868 |       0 |        5,423,588 |                  |                  |                  |
|          2 |       ***** |1556813907869 |      10 |        5,423,588 |                  |                  |                  |
|          3 |       ***** |1556813917870 |      20 |        5,423,588 |                  |                  |                  |
|          4 |       ***** |1556813927868 |      30 |        5,423,588 |                  |                  |                  |
|          5 |       ***** |1556813937888 |      40 |        5,423,588 |                  |                  |                  |
|          6 |       ***** |1556813947870 |      50 |        5,423,588 |                  |                  |                  |
|          7 |           2 |1556813957868 |      60 |        8,347,765 |           48,736 |           48,736 |           48,736 |
|          8 |           3 |1556813967873 |      70 |       14,128,023 |           97,972 |          577,737 |          124,340 |
|          9 |       ***** |1556813977868 |      80 |       14,128,023 |           97,972 |                0 |          108,805 |
|         10 |       ***** |1556813987870 |      90 |       14,128,023 |           97,972 |                0 |           96,714 |
|         11 |       ***** |1556813997868 |     100 |       14,128,023 |           97,972 |                0 |           87,044 |
|         12 |       ***** |1556814007868 |     110 |       14,128,023 |           97,972 |                0 |           79,131 |
|         13 |       ***** |1556814017868 |     120 |       14,128,023 |           97,972 |                0 |           72,537 |
|         14 |           4 |1556814027872 |     130 |       22,147,456 |          131,285 |          133,659 |          128,641 |
|         15 |       ***** |1556814037868 |     140 |       22,147,456 |          131,285 |                0 |          119,456 |
|         16 |       ***** |1556814047867 |     149 |       22,147,456 |          131,285 |                0 |          111,493 |
|         17 |       ***** |1556814057869 |     160 |       22,147,456 |          131,285 |                0 |          104,524 |
|         18 |       ***** |1556814067871 |     170 |       22,147,456 |          131,285 |                0 |           98,374 |
|         19 |       ***** |1556814077868 |     180 |       22,147,456 |          131,285 |                0 |           92,910 |
|         20 |           5 |1556814087868 |     190 |       23,429,826 |          105,132 |           21,374 |           94,770 |
|         21 |       ***** |1556814097868 |     200 |       23,429,826 |          105,132 |                0 |           90,031 |
|         22 |       ***** |1556814107870 |     210 |       23,429,826 |          105,132 |                0 |           85,743 |
|         23 |       ***** |1556814117869 |     220 |       23,429,826 |          105,132 |                0 |           81,846 |
|         24 |       ***** |1556814127870 |     230 |       23,429,826 |          105,132 |                0 |           78,287 |
|         25 |       ***** |1556814137869 |     240 |       23,429,826 |          105,132 |                0 |           75,026 |
|         26 |       ***** |1556814147870 |     250 |       23,429,826 |          105,132 |                0 |           72,024 |
|         27 |       ***** |1556814157868 |     260 |       23,429,826 |          105,132 |                0 |           69,255 |
|         28 |       ***** |1556814167868 |     270 |       23,429,826 |          105,132 |                0 |           66,690 |
|         29 |       ***** |1556814177869 |     280 |       23,429,826 |          105,132 |                0 |           64,308 |
|         30 |       ***** |1556814187871 |     290 |       23,429,826 |          105,132 |                0 |           62,090 |
|         31 |       ***** |1556814197870 |     300 |       23,429,826 |          105,132 |                0 |           60,020 |

For last 120  seconds the count has not increased...

Removing sample: 310|23429826

Total Count: 23,429,826 | Linear Regression Rate:  131,285 | Linear Regression Standard Error: 31.18 | Average Rate: 128,641

#### Error Message

```
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:998)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
	at scala.concurrent.impl.Promise$DefaultPromise.tryAwait(Promise.scala:206)
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:222)
	at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:157)
	at org.apache.spark.util.ThreadUtils$.awaitReady(ThreadUtils.scala:243)
	at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:728)
	at org.apache.spark.SparkContext.runJob(SparkContext.scala:2061)
	at org.apache.spark.SparkContext.runJob(SparkContext.scala:2082)
	at org.apache.spark.SparkContext.runJob(SparkContext.scala:2114)
	at org.elasticsearch.spark.rdd.EsSpark$.doSaveToEs(EsSpark.scala:108)
	at org.elasticsearch.spark.rdd.EsSpark$.saveToEs(EsSpark.scala:79)
	at org.elasticsearch.spark.rdd.EsSpark$.saveToEs(EsSpark.scala:76)
	at org.elasticsearch.spark.rdd.EsSpark$.saveJsonToEs(EsSpark.scala:112)
	at org.jennings.estest.SendKafkaTopicElasticsearch$$anonfun$main$3.apply(SendKafkaTopicElasticsearch.scala:168)
	at org.jennings.estest.SendKafkaTopicElasticsearch$$anonfun$main$3.apply(SendKafkaTopicElasticsearch.scala:162)
	at org.apache.spark.streaming.dstream.DStream$$anonfun$foreachRDD$1$$anonfun$apply$mcV$sp$3.apply(DStream.scala:628)
	at org.apache.spark.streaming.dstream.DStream$$anonfun$foreachRDD$1$$anonfun$apply$mcV$sp$3.apply(DStream.scala:628)
	at org.apache.spark.streaming.dstream.ForEachDStream$$anonfun$1$$anonfun$apply$mcV$sp$1.apply$mcV$sp(ForEachDStream.scala:51)
	at org.apache.spark.streaming.dstream.ForEachDStream$$anonfun$1$$anonfun$apply$mcV$sp$1.apply(ForEachDStream.scala:51)
	at org.apache.spark.streaming.dstream.ForEachDStream$$anonfun$1$$anonfun$apply$mcV$sp$1.apply(ForEachDStream.scala:51)
	at org.apache.spark.streaming.dstream.DStream.createRDDWithLocalProperties(DStream.scala:416)
	at org.apache.spark.streaming.dstream.ForEachDStream$$anonfun$1.apply$mcV$sp(ForEachDStream.scala:50)
	at org.apache.spark.streaming.dstream.ForEachDStream$$anonfun$1.apply(ForEachDStream.scala:50)
	at org.apache.spark.streaming.dstream.ForEachDStream$$anonfun$1.apply(ForEachDStream.scala:50)
	at scala.util.Try$.apply(Try.scala:192)
	at org.apache.spark.streaming.scheduler.Job.run(Job.scala:39)
	at org.apache.spark.streaming.scheduler.JobScheduler$JobHandler$$anonfun$run$1.apply$mcV$sp(JobScheduler.scala:257)
	at org.apache.spark.streaming.scheduler.JobScheduler$JobHandler$$anonfun$run$1.apply(JobScheduler.scala:257)
	at org.apache.spark.streaming.scheduler.JobScheduler$JobHandler$$anonfun$run$1.apply(JobScheduler.scala:257)
	at scala.util.DynamicVariable.withValue(DynamicVariable.scala:58)
	at org.apache.spark.streaming.scheduler.JobScheduler$JobHandler.run(JobScheduler.scala:256)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
```

### Changed number cores/max

```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=7 \
--conf spark.cores.max=28 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101,a102,a103 9200 - - 3 true false true planes 60s 10000 0 false
```

#### This also failed with error message.

```
org.apache.spark.SparkException: Could not find CoarseGrainedScheduler.
	at org.apache.spark.rpc.netty.Dispatcher.postMessage(Dispatcher.scala:160)
	at org.apache.spark.rpc.netty.Dispatcher.postOneWayMessage(Dispatcher.scala:140)
	at org.apache.spark.rpc.netty.NettyRpcHandler.receive(NettyRpcEnv.scala:655)
	at org.apache.spark.network.server.TransportRequestHandler.processOneWayMessage(TransportRequestHandler.java:275)
	at org.apache.spark.network.server.TransportRequestHandler.handle(TransportRequestHandler.java:105)
	at org.apache.spark.network.server.TransportChannelHandler.channelRead(TransportChannelHandler.java:118)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at org.apache.spark.network.util.TransportFrameDecoder.channelRead(TransportFrameDecoder.java:85)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:138)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858)
	at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138)
	at java.lang.Thread.run(Thread.java:748)
```

### Added two more Kafka Nodes

- 3 D16Sv3 - Elasticsearch a101,a102,a103
- 3 D16Sv3 - Kafka a41,a42,a43
- 3 D16Sv3 - Spark a1,a2,a3
- 1 D16sv3 - Test p1


Still getting errors when running 

```
org.apache.spark.SparkException: Job aborted due to stage failure: Task 2 in stage 33.0 failed 4 times, most recent failure: Lost task 2.3 in stage 33.0 (TID 158, 10.0.0.10, executor 1): java.util.ConcurrentModificationException: KafkaConsumer is not safe for multi-threaded access
```


### Rebuild by Cluster 

- 3 D16Sv3 - Elasticsearch a101,a102,a103
- 3 D16Sv3 - Kafka a41,a42,a43
- 3 D16Sv3 - Spark a1,a2,a3
- 1 D16sv3 - Test p1


```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=7 \
--conf spark.cores.max=28 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes3 1 \
a101,a102,a103 9200 - - 3 true false true planes 60s 10000 0 false
```

Still getting errors....

Tried this Spark Job

```
/opt/spark/bin/spark-submit \
 --conf spark.executor.cores=7 \
 --conf spark.cores.max=910 \
 --conf spark.executor.memory=8000m \
 --conf spark.es.batch.size.bytes=45000000 \
 --conf spark.es.batch.size.entries=70000 \
 --conf spark.es.batch.write.refresh=false \
 --conf spark.streaming.concurrentJobs=64 \
 --conf spark.scheduler.mode=FAIR \
 --conf spark.locality.wait=0s \
 --conf spark.serializer=org.apache.spark.serializer.KryoSerializer  \
 --conf spark.driver.extraJavaOptions=-Dlog4j.configurationFile=/home/spark/sparktest/log4j2conf.xml \
 --conf spark.executor.extraJavaOptions="-Dlog4j.configurationFile=/home/spark/sparktest/log4j2conf.xml -XX:+UseG1GC" \
 --conf spark.streaming.kafka.consumer.cache.enabled=false \
 --class  org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
  spark://m1:7077 1000 a41:9092 group1 planes3 1 a101,a102,a103 9200 - - 3 true false true planes 60s
```

Worked

With multiple nodes adding ```cache.enable=false``` parameter got rid of errors.

```
/opt/spark/bin/spark-submit \
--conf spark.executor.cores=3 \
--conf spark.cores.max=27 \
--conf spark.executor.memory=5000m \
--conf spark.es.batch.size.bytes=421000000 \
--conf spark.es.batch.size.entries=50000 \
--conf spark.es.batch.write.refresh=false \
--conf spark.streaming.concurrentJobs=64 \
--conf spark.scheduler.mode=FAIR \
--conf spark.locality.wait=0s \
--conf spark.streaming.kafka.consumer.cache.enabled=false \
--class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
spark://m1:7077 1000 a41:9092 group1 planes9 1 \
a101,a102,a103 9200 - - 9 true false true planes 60s 10000 0 false
```

### Modify Sending

Added another test node: a81

bash sendPlanes a41:9092 planes9 planes00000 100 25 2

Sending 400k/s using another test nodes (a81) and p1.  The ingest rate was 184k/s.

Sending 200k/s from a81: The ingest rate was 122k/s

Sending 200k/s from p1: The ingest rate was 124k/s

Sending 400k/s from p1: The ingest rate was 129k/s

Sending 400k/s using another test nodes (a81) and p1.  The ingest rate was 149k/s.


### Tried Kafka Topic with 9 Partitions

```
/opt/spark/bin/spark-submit \
  --conf spark.executor.cores=4 \
  --conf spark.cores.max=36 \
  --conf spark.executor.memory=5000m \
  --conf spark.es.batch.size.bytes=421000000 \
  --conf spark.es.batch.size.entries=50000 \
  --conf spark.es.batch.write.refresh=false \
  --conf spark.streaming.concurrentJobs=64 \
  --conf spark.scheduler.mode=FAIR \
  --conf spark.locality.wait=0s  \
  --conf spark.streaming.kafka.consumer.cache.enabled=false \
  --class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
  spark://m1:7077 1000 a41:9092 group1 planes9 1 \
  a101,a102,a103 9200 - - 9 true false true planes 60s 10000 0 false
```


|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556830654218 |       0 |        2,421,424 |                  |                  |                  |
|          2 |           2 |1556830664149 |       9 |        8,000,341 |          561,768 |          561,768 |          561,768 |
|          3 |       ***** |1556830674141 |      19 |        8,000,341 |          561,768 |                0 |          280,024 |
|          4 |       ***** |1556830684151 |      29 |        8,000,341 |          561,768 |                0 |          186,380 |
|          5 |       ***** |1556830694147 |      39 |        8,000,341 |          561,768 |                0 |          139,721 |
|          6 |       ***** |1556830704197 |      49 |        8,000,341 |          561,768 |                0 |          111,625 |
|          7 |       ***** |1556830714135 |      59 |        8,000,341 |          561,768 |                0 |           93,111 |
|          8 |           3 |1556830724146 |      69 |        9,921,233 |           80,937 |           32,016 |          107,250 |
|          9 |           4 |1556830734191 |      79 |       25,287,655 |          194,540 |        1,529,758 |          285,924 |
|         10 |       ***** |1556830744141 |      89 |       25,287,655 |          194,540 |                0 |          254,287 |
|         11 |       ***** |1556830754165 |      99 |       25,287,655 |          194,540 |                0 |          228,784 |
|         12 |       ***** |1556830764179 |     109 |       25,287,655 |          194,540 |                0 |          207,949 |
|         13 |       ***** |1556830774139 |     119 |       25,287,655 |          194,540 |                0 |          190,677 |
|         14 |       ***** |1556830784139 |     129 |       25,287,655 |          194,540 |                0 |          176,001 |
|         15 |           5 |1556830794145 |     139 |       34,914,515 |          219,524 |          160,571 |          232,215 |
|         16 |           6 |1556830804141 |     149 |       40,039,203 |          235,399 |          512,674 |          250,914 |
|         17 |       ***** |1556830814166 |     159 |       40,039,203 |          235,399 |                0 |          235,188 |
|         18 |       ***** |1556830824146 |     169 |       40,039,203 |          235,399 |                0 |          221,375 |
|         19 |       ***** |1556830834148 |     179 |       40,039,203 |          235,399 |                0 |          209,069 |
|         20 |       ***** |1556830844136 |     189 |       40,039,203 |          235,399 |                0 |          198,074 |
|         21 |       ***** |1556830854137 |     199 |       40,039,203 |          235,399 |                0 |          188,165 |
|         22 |           7 |1556830864139 |     209 |       52,000,000 |          235,824 |          199,353 |          236,177 |
|         23 |       ***** |1556830874138 |     219 |       52,000,000 |          235,824 |                0 |          225,439 |
|         24 |       ***** |1556830884139 |     229 |       52,000,000 |          235,824 |                0 |          215,633 |
|         25 |       ***** |1556830894142 |     239 |       52,000,000 |          235,824 |                0 |          206,643 |
|         26 |       ***** |1556830904140 |     249 |       52,000,000 |          235,824 |                0 |          198,376 |
|         27 |       ***** |1556830914141 |     259 |       52,000,000 |          235,824 |                0 |          190,743 |
|         28 |       ***** |1556830924141 |     269 |       52,000,000 |          235,824 |                0 |          183,677 |
|         29 |       ***** |1556830934142 |     279 |       52,000,000 |          235,824 |                0 |          177,114 |
|         30 |       ***** |1556830944142 |     289 |       52,000,000 |          235,824 |                0 |          171,005 |
|         31 |       ***** |1556830954142 |     299 |       52,000,000 |          235,824 |                0 |          165,304 |
|         32 |       ***** |1556830964142 |     309 |       52,000,000 |          235,824 |                0 |          159,970 |
|         33 |       ***** |1556830974144 |     319 |       52,000,000 |          235,824 |                0 |          154,969 |

For last 120  seconds the count has not increased...
Removing sample: 329|52000000
Total Count: 52,000,000 | Linear Regression Rate:  235,399 | Linear Regression Standard Error: 37.79 | Average Rate: 250,914



### Sending 400k/s from p1

```
bash sendPlanes a41:9092 planes9 planes00000 100 13 4
```


|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556833144190 |       0 |        4,278,193 |                  |                  |                  |
|          2 |           2 |1556833154247 |      10 |        6,874,383 |          258,148 |          258,148 |          258,148 |
|          3 |       ***** |1556833164185 |      19 |        6,874,383 |          258,148 |                0 |          129,842 |
|          4 |       ***** |1556833174182 |      29 |        6,874,383 |          258,148 |                0 |           86,563 |
|          5 |       ***** |1556833184195 |      40 |        6,874,383 |          258,148 |                0 |           64,897 |
|          6 |       ***** |1556833194200 |      50 |        6,874,383 |          258,148 |                0 |           51,913 |
|          7 |           3 |1556833204387 |      60 |        8,446,768 |           57,043 |           31,360 |           69,249 |
|          8 |           4 |1556833214194 |      70 |       19,651,912 |          155,637 |        1,142,566 |          219,612 |
|          9 |           5 |1556833224183 |      79 |       21,264,328 |          185,750 |          161,419 |          212,345 |
|         10 |       ***** |1556833234199 |      90 |       21,264,328 |          185,750 |                0 |          188,716 |
|         11 |       ***** |1556833244190 |     100 |       21,264,328 |          185,750 |                0 |          169,861 |
|         12 |       ***** |1556833254182 |     109 |       21,264,328 |          185,750 |                0 |          154,431 |
|         13 |       ***** |1556833264246 |     120 |       21,264,328 |          185,750 |                0 |          141,485 |
|         14 |           6 |1556833274183 |     129 |       28,867,239 |          190,744 |          152,058 |          189,157 |
|         15 |           7 |1556833284196 |     140 |       34,448,781 |          206,948 |          557,430 |          215,495 |
|         16 |       ***** |1556833294185 |     149 |       34,448,781 |          206,948 |                0 |          201,144 |
|         17 |       ***** |1556833304221 |     160 |       34,448,781 |          206,948 |                0 |          188,530 |
|         18 |       ***** |1556833314181 |     169 |       34,448,781 |          206,948 |                0 |          177,483 |
|         19 |       ***** |1556833324203 |     180 |       34,448,781 |          206,948 |                0 |          167,602 |
|         20 |           8 |1556833334210 |     190 |       37,170,862 |          188,091 |           54,426 |          173,101 |
|         21 |           9 |1556833344239 |     200 |       42,715,274 |          190,445 |          552,838 |          192,138 |
|         22 |          10 |1556833354183 |     209 |       47,136,571 |          196,436 |          444,620 |          204,094 |
|         23 |       ***** |1556833364192 |     220 |       47,136,571 |          196,436 |                0 |          194,809 |
|         24 |       ***** |1556833374184 |     229 |       47,136,571 |          196,436 |                0 |          186,346 |
|         25 |       ***** |1556833384186 |     239 |       47,136,571 |          196,436 |                0 |          178,580 |
|         26 |       ***** |1556833394185 |     249 |       47,136,571 |          196,436 |                0 |          171,437 |
|         27 |          11 |1556833404187 |     259 |       50,725,570 |          188,948 |           71,774 |          178,646 |
|         28 |          12 |1556833414185 |     269 |       52,000,000 |          184,274 |          127,468 |          176,751 |
|         29 |       ***** |1556833424185 |     279 |       52,000,000 |          184,274 |                0 |          170,438 |
|         30 |       ***** |1556833434185 |     289 |       52,000,000 |          184,274 |                0 |          164,561 |
|         31 |       ***** |1556833444186 |     299 |       52,000,000 |          184,274 |                0 |          159,075 |
|         32 |       ***** |1556833454185 |     309 |       52,000,000 |          184,274 |                0 |          153,944 |
|         33 |       ***** |1556833464185 |     319 |       52,000,000 |          184,274 |                0 |          149,133 |
|         34 |       ***** |1556833474185 |     329 |       52,000,000 |          184,274 |                0 |          144,614 |
|         35 |       ***** |1556833484189 |     339 |       52,000,000 |          184,274 |                0 |          140,359 |
|         36 |       ***** |1556833494186 |     349 |       52,000,000 |          184,274 |                0 |          136,350 |
|         37 |       ***** |1556833504188 |     359 |       52,000,000 |          184,274 |                0 |          132,561 |
|         38 |       ***** |1556833514186 |     369 |       52,000,000 |          184,274 |                0 |          128,979 |
|         39 |       ***** |1556833524196 |     380 |       52,000,000 |          184,274 |                0 |          125,582 |

For last 120  seconds the count has not increased...
Removing sample: 389|52000000
Total Count: 52,000,000 | Linear Regression Rate:  188,948 | Linear Regression Standard Error: 12.35 | Average Rate: 178,646

### Longer run


|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556833989116 |       0 |        5,322,129 |                  |                  |                  |
|          2 |           2 |1556834049127 |      60 |       19,783,635 |          240,981 |          240,981 |          240,981 |
|          3 |           3 |1556834109113 |     119 |       31,032,782 |          214,263 |          187,530 |          214,261 |
|          4 |           4 |1556834169111 |     179 |       41,830,962 |          201,303 |          179,976 |          202,832 |
|          5 |           5 |1556834229112 |     239 |       52,244,750 |          193,162 |          173,560 |          195,514 |
|          6 |           6 |1556834289110 |     299 |       57,581,868 |          175,950 |           88,955 |          174,203 |
|          7 |           7 |1556834349115 |     359 |       64,270,781 |          162,893 |          111,473 |          163,747 |
|          8 |           8 |1556834409153 |     420 |       73,002,478 |          155,997 |          145,436 |          161,129 |
|          9 |           9 |1556834469277 |     480 |       80,035,287 |          150,171 |          116,972 |          155,600 |
|         10 |          10 |1556834529886 |     540 |       88,528,276 |          146,651 |          140,128 |          153,866 |
|         11 |          11 |1556834590536 |     601 |       94,086,532 |          142,204 |           91,645 |          147,591 |
|         12 |          12 |1556834649120 |     660 |      103,128,439 |          140,106 |          154,341 |          148,190 |
|         13 |          13 |1556834709110 |     719 |      111,299,070 |          138,707 |          136,200 |          147,191 |
|         14 |          14 |1556834769113 |     779 |      117,757,944 |          136,941 |          107,643 |          144,149 |
|         15 |          15 |1556834829118 |     840 |      126,916,272 |          136,183 |          152,626 |          144,755 |
|         16 |          16 |1556834889249 |     900 |      137,232,985 |          136,458 |          171,571 |          146,546 |
|         17 |          17 |1556834951229 |     962 |      144,512,099 |          136,261 |          117,443 |          144,671 |
|         18 |          18 |1556835009122 |    1020 |      152,447,241 |          136,137 |          137,066 |          144,239 |
|         19 |          19 |1556835069204 |    1080 |      159,273,153 |          135,692 |          113,610 |          142,536 |
|         20 |          20 |1556835130261 |    1141 |      167,033,964 |          135,243 |          127,108 |          141,710 |
|         21 |          21 |1556835189122 |    1200 |      176,459,522 |          135,228 |          160,132 |          142,614 |
|         22 |          22 |1556835249296 |    1260 |      182,544,207 |          134,811 |          101,118 |          140,632 |
|         23 |          23 |1556835309124 |    1320 |      189,737,980 |          134,336 |          120,241 |          139,708 |
|         24 |          24 |1556835369144 |    1380 |      196,335,067 |          133,726 |          109,915 |          138,412 |
|         25 |          25 |1556835429515 |    1440 |      202,642,723 |          132,979 |          104,482 |          136,990 |
|         26 |          26 |1556835489300 |    1500 |      208,488,799 |          132,093 |           97,785 |          135,428 |
|         27 |          27 |1556835549239 |    1560 |      218,295,916 |          131,639 |          163,618 |          136,511 |
|         28 |          28 |1556835609115 |    1619 |      227,525,973 |          131,442 |          154,153 |          137,163 |
|         29 |          29 |1556835669182 |    1680 |      234,414,496 |          131,167 |          114,681 |          136,359 |
|         30 |          30 |1556835729499 |    1740 |      237,247,358 |          130,397 |           46,966 |          133,261 |
|         31 |          31 |1556835789174 |    1800 |      243,844,608 |          129,648 |          110,553 |          132,508 |
|         32 |          32 |1556835849822 |    1860 |      252,040,388 |          129,062 |          135,137 |          132,594 |
|         33 |          33 |1556835909234 |    1920 |      261,476,422 |          128,734 |          158,824 |          133,405 |
|         34 |          34 |1556835969222 |    1980 |      270,275,763 |          128,551 |          146,685 |          133,808 |
|         35 |          35 |1556836029196 |    2040 |      276,463,092 |          128,277 |          103,167 |          132,907 |
|         36 |          36 |1556836089115 |    2099 |      282,116,191 |          127,893 |           94,346 |          131,807 |
|         37 |          37 |1556836149458 |    2160 |      287,832,338 |          127,426 |           94,728 |          130,771 |
|         38 |          38 |1556836209114 |    2219 |      295,554,284 |          127,037 |          129,441 |          130,735 |
|         39 |          39 |1556836269114 |    2279 |      305,096,908 |          126,828 |          159,044 |          131,480 |
|         40 |          40 |1556836329116 |    2340 |      312,605,711 |          126,643 |          125,143 |          131,318 |
|         41 |          41 |1556836389142 |    2400 |      321,842,175 |          126,578 |          153,874 |          131,882 |
|         42 |          42 |1556836449120 |    2460 |      329,634,489 |          126,534 |          129,920 |          131,834 |
|         43 |          43 |1556836509120 |    2520 |      336,105,063 |          126,436 |          107,843 |          131,263 |
|         44 |          44 |1556836569483 |    2580 |      341,863,782 |          126,256 |           95,401 |          130,424 |
|         45 |          45 |1556836629928 |    2640 |      348,644,879 |          126,058 |          112,186 |          130,007 |
|         46 |          46 |1556836689422 |    2700 |      355,075,137 |          125,835 |          108,082 |          129,523 |
|         47 |          47 |1556836749411 |    2760 |      363,478,417 |          125,677 |          140,080 |          129,753 |
|         48 |          48 |1556836809133 |    2820 |      371,333,629 |          125,553 |          131,530 |          129,791 |
|         49 |          49 |1556836869120 |    2880 |      380,181,474 |          125,498 |          147,496 |          130,159 |
|         50 |          50 |1556836929117 |    2940 |      385,744,125 |          125,372 |           92,715 |          129,395 |
|         51 |          51 |1556836989124 |    3000 |      394,343,978 |          125,300 |          143,314 |          129,674 |
|         52 |          52 |1556837049119 |    3060 |      398,018,859 |          125,097 |           61,253 |          128,332 |
|         53 |          53 |1556837109131 |    3120 |      400,000,000 |          124,723 |           33,012 |          126,499 |
|         54 |       ***** |1556837169114 |    3179 |      400,000,000 |          124,723 |                0 |          124,113 |

For last 120  seconds the count has not increased...

Removing sample: 3239|400000000

Total Count: 400,000,000 | Linear Regression Rate:  125,097 | Linear Regression Standard Error: 0.54 | Average Rate: 128,332

Observation: In most, if not all, tests the rates decline during the test.  For example above started at 240k/s and dropped to 133k/s after 30 minutes.

### Retest 9 exeutors

```
/opt/spark/bin/spark-submit \
  --conf spark.executor.cores=4 \
  --conf spark.cores.max=36 \
  --conf spark.executor.memory=5000m \
  --conf spark.es.batch.size.bytes=421000000 \
  --conf spark.es.batch.size.entries=50000 \
  --conf spark.es.batch.write.refresh=false \
  --conf spark.streaming.concurrentJobs=64 \
  --conf spark.scheduler.mode=FAIR \
  --conf spark.locality.wait=0s  \
  --conf spark.streaming.kafka.consumer.cache.enabled=false \
  --class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
  spark://m1:7077 1000 a41:9092 group1 planes9 1 \
  a101,a102,a103 9200 - - 9 true false true planes 60s 10000 0 false
```

|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556838249127 |       0 |        2,691,331 |                  |                  |                  |
|          2 |           2 |1556838309119 |      59 |       18,788,685 |          268,325 |          268,325 |          268,325 |
|          3 |           3 |1556838369233 |     120 |       33,487,574 |          256,405 |          244,517 |          256,409 |
|          4 |           4 |1556838429122 |     179 |       46,809,512 |          245,052 |          222,444 |          245,108 |
|          5 |           5 |1556838489128 |     240 |       60,063,340 |          237,942 |          220,875 |          239,049 |
|          6 |           6 |1556838549131 |     300 |       72,775,035 |          232,183 |          211,851 |          233,609 |
|          7 |           7 |1556838609122 |     359 |       82,842,940 |          223,231 |          167,824 |          222,646 |
|          8 |           8 |1556838669126 |     419 |       88,886,531 |          209,290 |          100,720 |          205,227 |
|          9 |           9 |1556838729129 |     480 |      100,916,265 |          202,197 |          200,486 |          204,634 |
|         10 |          10 |1556838789161 |     540 |      111,165,703 |          196,869 |          170,733 |          200,866 |
|         11 |          11 |1556838849116 |     599 |      123,484,800 |          194,354 |          205,472 |          201,326 |
|         12 |          12 |1556838909118 |     659 |      133,173,374 |          191,638 |          161,471 |          197,703 |
|         13 |          13 |1556838969118 |     719 |      144,101,541 |          189,683 |          182,136 |          196,406 |
|         14 |          14 |1556839029122 |     779 |      154,268,846 |          187,876 |          169,444 |          194,331 |
|         15 |          15 |1556839089364 |     840 |      164,177,229 |          186,113 |          164,476 |          192,191 |
|         16 |          16 |1556839149121 |     899 |      170,528,599 |          183,182 |          106,287 |          186,487 |
|         17 |          17 |1556839209146 |     960 |      175,420,774 |          179,175 |           81,502 |          179,923 |
|         18 |          18 |1556839269119 |    1019 |      181,679,454 |          175,051 |          104,358 |          175,480 |
|         19 |          19 |1556839329177 |    1080 |      192,486,952 |          172,177 |          179,951 |          175,729 |
|         20 |          20 |1556839389126 |    1139 |      203,071,324 |          170,145 |          176,556 |          175,772 |
|         21 |          21 |1556839449874 |    1200 |      213,205,647 |          168,596 |          166,826 |          175,319 |
|         22 |          22 |1556839509301 |    1260 |      222,923,451 |          167,375 |          163,525 |          174,763 |
|         23 |          23 |1556839569121 |    1319 |      231,278,060 |          166,145 |          139,662 |          173,173 |
|         24 |          24 |1556839629120 |    1379 |      237,933,400 |          164,647 |          110,924 |          170,466 |
|         25 |          25 |1556839689117 |    1439 |      240,000,000 |          162,278 |           34,445 |          164,799 |
|         26 |       ***** |1556839749117 |    1499 |      240,000,000 |          162,278 |                0 |          158,207 |

For last 120  seconds the count has not increased...
Removing sample: 1559|240000000
Total Count: 240,000,000 | Linear Regression Rate:  164,647 | Linear Regression Standard Error: 3.04 | Average Rate: 170,466


### Sending From Two Test Servers 80k/s Each

```
bash sendPlanes a41:9092 planes9 planes00000 40 200 2
```

```
/opt/spark/bin/spark-submit \
  --conf spark.executor.cores=5 \
  --conf spark.cores.max=45 \
  --conf spark.executor.memory=5000m \
  --conf spark.es.batch.size.bytes=421000000 \
  --conf spark.es.batch.size.entries=50000 \
  --conf spark.es.batch.write.refresh=false \
  --conf spark.streaming.concurrentJobs=64 \
  --conf spark.scheduler.mode=FAIR \
  --conf spark.locality.wait=0s  \
  --conf spark.streaming.kafka.consumer.cache.enabled=false \
  --class org.jennings.estest.SendKafkaTopicElasticsearch /home/spark/sparktest/target/sparktest-full.jar \
  spark://m1:7077 1000 a41:9092 group1 planes9 1 \
  a101,a102,a103 9200 - - 9 true false true planes 60s 10000 0 false
```

|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556888964715 |       0 |        8,103,614 |                  |                  |                  |
|          2 |           2 |1556889024726 |      60 |       18,677,383 |          176,197 |          176,197 |          176,197 |
|          3 |           3 |1556889084717 |     120 |       28,370,209 |          168,886 |          161,571 |          168,885 |
|          4 |           4 |1556889144715 |     180 |       39,109,067 |          171,185 |          178,987 |          172,253 |
|          5 |           5 |1556889204718 |     240 |       49,522,223 |          172,116 |          173,544 |          172,575 |
|          6 |           6 |1556889264716 |     300 |       60,068,886 |          172,906 |          175,784 |          173,217 |
|          7 |           7 |1556889324713 |     359 |       70,084,773 |          172,549 |          166,940 |          172,171 |
|          8 |           8 |1556889384714 |     419 |       78,066,724 |          169,107 |          133,030 |          166,579 |
|          9 |           9 |1556889444737 |     480 |       83,946,210 |          162,755 |           97,954 |          157,998 |
|         10 |          10 |1556889504735 |     540 |       91,057,643 |          157,109 |          118,528 |          153,613 |
|         11 |          11 |1556889564714 |     599 |      101,370,190 |          154,704 |          171,936 |          155,445 |
|         12 |          12 |1556889624726 |     660 |      112,025,493 |          154,195 |          177,553 |          157,455 |
|         13 |          13 |1556889684717 |     720 |      121,361,209 |          153,934 |          155,619 |          157,302 |
|         14 |          14 |1556889744714 |     779 |      130,625,435 |          153,784 |          154,411 |          157,079 |
|         15 |          15 |1556889804751 |     840 |      141,015,129 |          154,168 |          173,055 |          158,221 |
|         16 |          16 |1556889867420 |     902 |      149,408,049 |          153,958 |          133,925 |          156,534 |
|         17 |          17 |1556889924715 |     960 |      157,442,673 |          153,559 |          140,233 |          155,562 |
|         18 |          18 |1556889984713 |    1019 |      163,302,969 |          152,299 |           97,675 |          152,157 |
|         19 |          19 |1556890044728 |    1080 |      168,938,042 |          150,476 |           93,894 |          148,919 |
|         20 |          20 |1556890104754 |    1140 |      176,093,943 |          148,700 |          119,213 |          147,355 |
|         21 |          21 |1556890165474 |    1200 |      182,896,465 |          146,903 |          112,031 |          145,569 |
|         22 |          22 |1556890224768 |    1260 |      191,041,068 |          145,442 |          137,360 |          145,182 |
|         23 |          23 |1556890284717 |    1320 |      199,838,006 |          144,345 |          146,740 |          145,253 |
|         24 |          24 |1556890344722 |    1380 |      208,366,019 |          143,477 |          142,122 |          145,117 |
|         25 |          25 |1556890405226 |    1440 |      216,312,073 |          142,689 |          131,331 |          144,538 |
|         26 |          26 |1556890464859 |    1500 |      224,074,206 |          141,962 |          130,165 |          143,967 |
|         27 |          27 |1556890524759 |    1560 |      229,728,363 |          141,009 |           94,393 |          142,063 |
|         28 |          28 |1556890584716 |    1620 |      235,301,253 |          139,891 |           92,948 |          140,245 |
|         29 |          29 |1556890645060 |    1680 |      243,661,710 |          138,980 |          138,547 |          140,184 |
|         30 |          30 |1556890704714 |    1739 |      251,986,674 |          138,242 |          139,554 |          140,163 |
|         31 |          31 |1556890764859 |    1800 |      260,595,401 |          137,669 |          143,133 |          140,262 |
|         32 |          32 |1556890825158 |    1860 |      269,352,473 |          137,239 |          145,227 |          140,423 |
|         33 |          33 |1556890884754 |    1920 |      274,852,746 |          136,644 |           92,293 |          138,929 |
|         34 |          34 |1556890945625 |    1980 |      279,137,328 |          135,809 |           70,388 |          136,823 |
|         35 |          35 |1556891004769 |    2040 |      287,695,438 |          135,151 |          144,700 |          137,051 |
|         36 |          36 |1556891065152 |    2100 |      292,805,756 |          134,368 |           84,632 |          135,544 |
|         37 |          37 |1556891125961 |    2161 |      302,140,095 |          133,787 |          153,503 |          136,050 |
|         38 |          38 |1556891184748 |    2220 |      309,383,362 |          133,252 |          123,212 |          135,710 |
|         39 |          39 |1556891244815 |    2280 |      316,475,106 |          132,737 |          118,064 |          135,245 |
|         40 |          40 |1556891304795 |    2340 |      322,012,738 |          132,148 |           92,325 |          134,145 |
|         41 |          41 |1556891364844 |    2400 |      327,344,806 |          131,489 |           88,795 |          133,010 |
|         42 |          42 |1556891424726 |    2460 |      335,618,857 |          130,943 |          138,173 |          133,136 |
|         43 |          43 |1556891485799 |    2521 |      343,812,619 |          130,479 |          134,163 |          133,161 |
|         44 |          44 |1556891544759 |    2580 |      352,245,776 |          130,113 |          143,032 |          133,386 |
|         45 |          45 |1556891604732 |    2640 |      358,365,080 |          129,713 |          102,034 |          132,674 |
|         46 |          46 |1556891664718 |    2700 |      365,383,730 |          129,327 |          117,005 |          132,326 |
|         47 |          47 |1556891724765 |    2760 |      372,081,917 |          128,941 |          111,549 |          131,874 |
|         48 |          48 |1556891784718 |    2820 |      381,134,245 |          128,658 |          150,990 |          132,280 |
|         49 |          49 |1556891850100 |    2885 |      387,212,888 |          128,312 |           92,971 |          131,389 |
|         50 |          50 |1556891904809 |    2940 |      393,892,746 |          127,993 |          122,098 |          131,217 |
|         51 |          51 |1556891966873 |    3002 |      400,527,096 |          127,661 |          106,895 |          130,714 |
|         52 |          52 |1556892024719 |    3060 |      407,369,996 |          127,346 |          118,295 |          130,479 |
|         53 |          53 |1556892084736 |    3120 |      414,479,140 |          127,047 |          118,452 |          130,248 |
|         54 |          54 |1556892144756 |    3180 |      418,619,839 |          126,663 |           68,989 |          129,091 |
|         55 |          55 |1556892204738 |    3240 |      424,000,987 |          126,247 |           89,713 |          128,362 |
|         56 |          56 |1556892264742 |    3300 |      432,436,465 |          125,901 |          140,582 |          128,585 |
|         57 |          57 |1556892324797 |    3360 |      439,699,456 |          125,582 |          120,939 |          128,448 |
|         58 |          58 |1556892384797 |    3420 |      446,744,704 |          125,279 |          117,421 |          128,255 |
|         59 |          59 |1556892446084 |    3481 |      454,242,233 |          125,002 |          122,335 |          128,150 |
|         60 |          60 |1556892504760 |    3540 |      462,889,482 |          124,787 |          147,373 |          128,469 |
|         61 |          61 |1556892564850 |    3600 |      470,084,094 |          124,584 |          119,731 |          128,323 |
|         62 |          62 |1556892624759 |    3660 |      478,865,011 |          124,435 |          146,571 |          128,622 |
|         63 |          63 |1556892685685 |    3720 |      486,764,098 |          124,306 |          129,651 |          128,639 |
|         64 |          64 |1556892744743 |    3780 |      492,942,553 |          124,162 |          104,617 |          128,263 |
|         65 |          65 |1556892804729 |    3840 |      496,133,418 |          123,931 |           53,193 |          127,091 |
|         66 |          66 |1556892864723 |    3900 |      503,304,380 |          123,715 |          119,528 |          126,974 |
|         67 |          67 |1556892924723 |    3960 |      509,078,291 |          123,481 |           96,232 |          126,509 |
|         68 |          68 |1556892984773 |    4020 |      517,714,819 |          123,294 |          143,822 |          126,767 |
|         69 |          69 |1556893044735 |    4080 |      527,255,481 |          123,166 |          159,112 |          127,242 |
|         70 |          70 |1556893105277 |    4140 |      533,030,986 |          123,016 |           95,397 |          126,777 |
|         71 |          71 |1556893164800 |    4200 |      540,900,371 |          122,888 |          132,207 |          126,854 |
|         72 |          72 |1556893225015 |    4260 |      545,565,509 |          122,719 |           77,475 |          126,156 |
|         73 |          73 |1556893284790 |    4320 |      554,359,118 |          122,591 |          147,112 |          126,446 |
|         74 |          74 |1556893344728 |    4380 |      560,194,588 |          122,445 |           97,358 |          126,048 |
|         75 |          75 |1556893407984 |    4443 |      567,357,560 |          122,300 |          113,238 |          125,865 |
|         76 |          76 |1556893465539 |    4500 |      573,814,120 |          122,156 |          112,181 |          125,690 |
|         77 |          77 |1556893524770 |    4560 |      580,515,245 |          122,015 |          113,135 |          125,527 |
|         78 |          78 |1556893584975 |    4620 |      589,332,690 |          121,908 |          146,457 |          125,800 |
|         79 |          79 |1556893644790 |    4680 |      597,970,892 |          121,830 |          144,415 |          126,038 |
|         80 |          80 |1556893706278 |    4741 |      602,780,788 |          121,717 |           78,225 |          125,418 |
|         81 |          81 |1556893764823 |    4800 |      607,492,267 |          121,575 |           80,476 |          124,870 |
|         82 |          82 |1556893824877 |    4860 |      613,179,810 |          121,420 |           94,707 |          124,497 |
|         83 |          83 |1556893885280 |    4920 |      618,116,824 |          121,242 |           81,735 |          123,972 |
|         84 |          84 |1556893944742 |    4980 |      625,168,116 |          121,073 |          118,585 |          123,908 |
|         85 |          85 |1556894005161 |    5040 |      630,967,579 |          120,896 |           95,987 |          123,573 |
|         86 |          86 |1556894064728 |    5100 |      638,134,477 |          120,730 |          120,317 |          123,535 |
|         87 |          87 |1556894124823 |    5160 |      644,680,242 |          120,566 |          108,924 |          123,365 |
|         88 |          88 |1556894184819 |    5220 |      650,876,104 |          120,400 |          103,271 |          123,134 |
|         89 |          89 |1556894244726 |    5280 |      659,291,186 |          120,259 |          140,469 |          123,331 |
|         90 |          90 |1556894305012 |    5340 |      667,159,031 |          120,136 |          130,509 |          123,412 |
|         91 |          91 |1556894364926 |    5400 |      672,627,406 |          119,999 |           91,270 |          123,055 |
|         92 |          92 |1556894424822 |    5460 |      679,674,894 |          119,870 |          117,662 |          122,996 |
|         93 |          93 |1556894487071 |    5522 |      685,116,901 |          119,726 |           87,423 |          122,595 |
|         94 |          94 |1556894545048 |    5580 |      690,170,915 |          119,570 |           87,173 |          122,227 |
|         95 |          95 |1556894604949 |    5640 |      696,923,376 |          119,419 |          112,727 |          122,126 |
|         96 |          96 |1556894666866 |    5702 |      704,624,375 |          119,280 |          124,376 |          122,151 |
|         97 |          97 |1556894724807 |    5760 |      711,210,161 |          119,146 |          113,664 |          122,065 |
|         98 |          98 |1556894784871 |    5820 |      719,046,461 |          119,028 |          130,466 |          122,152 |
|         99 |          99 |1556894844979 |    5880 |      723,455,934 |          118,889 |           73,359 |          121,653 |
|        100 |         100 |1556894904775 |    5940 |      728,109,385 |          118,733 |           77,822 |          121,212 |
|        101 |         101 |1556894966520 |    6001 |      736,339,784 |          118,595 |          133,297 |          121,336 |
|        102 |         102 |1556895024738 |    6060 |      740,698,002 |          118,442 |           74,860 |          120,890 |
|        103 |         103 |1556895084866 |    6120 |      747,019,070 |          118,289 |          105,127 |          120,735 |
|        104 |         104 |1556895145805 |    6181 |      752,113,569 |          118,126 |           83,600 |          120,369 |
|        105 |         105 |1556895204767 |    6240 |      759,003,072 |          117,971 |          116,846 |          120,335 |
|        106 |         106 |1556895264957 |    6300 |      764,604,832 |          117,811 |           93,068 |          120,075 |
|        107 |         107 |1556895325920 |    6361 |      771,149,626 |          117,655 |          107,357 |          119,953 |
|        108 |         108 |1556895384903 |    6420 |      776,606,161 |          117,495 |           92,510 |          119,701 |
|        109 |         109 |1556895444734 |    6480 |      784,200,535 |          117,348 |          126,930 |          119,768 |
|        110 |         110 |1556895506285 |    6541 |      791,390,837 |          117,209 |          116,819 |          119,740 |
|        111 |         111 |1556895566204 |    6601 |      797,219,220 |          117,067 |           97,271 |          119,536 |
|        112 |         112 |1556895624733 |    6660 |      800,000,000 |          116,901 |           47,511 |          118,903 |
|        113 |       ***** |1556895684734 |    6720 |      800,000,000 |          116,901 |                0 |          117,841 |

For last 120  seconds the count has not increased...

Removing sample: 6780|800000000

Total Count: 800,000,000 | Linear Regression Rate:  117,067 | Linear Regression Standard Error: 0.47 | Average Rate: 119,536


### Sending From Two Test Servers 60k/s Each

Total send rate 120k/s

```
bash sendPlanes a41:9092 planes9 planes00000 30 120 2
```

|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556896044760 |       0 |        6,116,385 |                  |                  |                  |
|          2 |           2 |1556896104735 |      59 |        8,749,350 |           43,901 |           43,901 |           43,901 |
|          3 |           3 |1556896164736 |     119 |       14,077,315 |           66,356 |           88,798 |           66,354 |
|          4 |           4 |1556896224749 |     179 |       21,899,062 |           87,801 |          130,334 |           87,687 |
|          5 |           5 |1556896284738 |     239 |       29,784,838 |          100,817 |          131,454 |           98,628 |
|          6 |           6 |1556896344736 |     299 |       37,490,902 |          108,482 |          128,439 |          104,590 |
|          7 |           7 |1556896404756 |     359 |       45,206,421 |          113,371 |          128,549 |          108,585 |
|          8 |           8 |1556896464733 |     419 |       52,646,351 |          116,297 |          124,046 |          110,793 |
|          9 |           9 |1556896524738 |     479 |       60,336,165 |          118,453 |          128,153 |          112,963 |
|         10 |          10 |1556896584736 |     539 |       67,843,542 |          119,914 |          125,127 |          114,315 |
|         11 |          11 |1556896644737 |     599 |       75,778,319 |          121,272 |          132,244 |          116,108 |
|         12 |          12 |1556896704741 |     659 |       83,740,395 |          122,495 |          132,692 |          117,616 |
|         13 |          13 |1556896764739 |     719 |       91,701,983 |          123,570 |          132,698 |          118,872 |
|         14 |          14 |1556896824737 |     779 |       99,532,956 |          124,444 |          130,521 |          119,768 |
|         15 |          15 |1556896884751 |     839 |      103,078,314 |          123,378 |           59,076 |          115,432 |
|         16 |          16 |1556896944737 |     899 |      107,559,946 |          121,591 |           74,711 |          112,718 |
|         17 |          17 |1556897004739 |     959 |      115,620,503 |          120,615 |          134,338 |          114,069 |
|         18 |          18 |1556897064736 |    1019 |      123,587,027 |          120,144 |          132,782 |          115,170 |
|         19 |          19 |1556897124736 |    1079 |      132,140,834 |          120,160 |          142,563 |          116,692 |
|         20 |          20 |1556897184745 |    1139 |      139,980,521 |          120,322 |          130,642 |          117,426 |
|         21 |          21 |1556897244735 |    1199 |      148,054,192 |          120,627 |          134,584 |          118,284 |
|         22 |          22 |1556897304739 |    1259 |      155,930,310 |          120,982 |          131,260 |          118,902 |
|         23 |          23 |1556897364740 |    1319 |      162,318,664 |          121,094 |          106,471 |          118,337 |
|         24 |          24 |1556897424745 |    1379 |      169,515,809 |          121,169 |          119,942 |          118,407 |
|         25 |          25 |1556897484744 |    1439 |      172,248,239 |          120,529 |           45,541 |          115,371 |
|         26 |          26 |1556897544736 |    1499 |      179,662,734 |          120,053 |          123,591 |          115,699 |
|         27 |          27 |1556897604735 |    1559 |      187,132,858 |          119,710 |          124,504 |          116,038 |
|         28 |          28 |1556897664775 |    1620 |      195,954,106 |          119,636 |          146,923 |          117,183 |
|         29 |          29 |1556897724739 |    1679 |      203,452,585 |          119,614 |          125,050 |          117,463 |
|         30 |          30 |1556897784741 |    1739 |      211,271,661 |          119,665 |          130,314 |          117,907 |
|         31 |          31 |1556897844787 |    1800 |      218,843,508 |          119,746 |          126,101 |          118,180 |
|         32 |          32 |1556897905176 |    1860 |      225,947,988 |          119,801 |          117,645 |          118,163 |
|         33 |          33 |1556897964876 |    1920 |      233,816,738 |          119,910 |          131,805 |          118,587 |
|         34 |          34 |1556898024751 |    1979 |      240,316,621 |          119,944 |          108,558 |          118,283 |
|         35 |          35 |1556898085140 |    2040 |      244,337,742 |          119,716 |           66,587 |          116,753 |
|         36 |          36 |1556898144805 |    2100 |      250,188,523 |          119,428 |           98,061 |          116,222 |
|         37 |          37 |1556898204896 |    2160 |      257,248,235 |          119,176 |          117,484 |          116,257 |
|         38 |          38 |1556898264927 |    2220 |      265,221,005 |          119,016 |          132,811 |          116,705 |
|         39 |          39 |1556898324740 |    2279 |      273,293,726 |          118,941 |          134,966 |          117,184 |
|         40 |          40 |1556898384795 |    2340 |      281,279,649 |          118,928 |          132,977 |          117,589 |
|         41 |          41 |1556898444816 |    2400 |      286,215,048 |          118,789 |           82,228 |          116,705 |
|         42 |          42 |1556898505730 |    2460 |      290,391,165 |          118,500 |           68,558 |          115,513 |
|         43 |          43 |1556898566164 |    2521 |      295,835,861 |          118,158 |           90,093 |          114,904 |
|         44 |          44 |1556898624974 |    2580 |      301,690,252 |          117,805 |           99,548 |          114,554 |
|         45 |          45 |1556898685763 |    2641 |      307,553,675 |          117,435 |           96,455 |          114,137 |
|         46 |          46 |1556898744772 |    2700 |      314,561,395 |          117,115 |          118,757 |          114,238 |
|         47 |          47 |1556898804786 |    2760 |      322,263,307 |          116,864 |          128,335 |          114,545 |
|         48 |          48 |1556898867365 |    2822 |      328,285,550 |          116,587 |           96,234 |          114,139 |
|         49 |          49 |1556898924869 |    2880 |      332,259,992 |          116,233 |           69,116 |          113,240 |
|         50 |          50 |1556898984907 |    2940 |      337,889,737 |          115,866 |           93,770 |          112,842 |
|         51 |          51 |1556899044745 |    2999 |      344,656,913 |          115,534 |          113,092 |          112,847 |
|         52 |          52 |1556899104829 |    3060 |      352,393,014 |          115,269 |          128,755 |          113,160 |
|         53 |          53 |1556899164742 |    3119 |      360,068,367 |          115,058 |          128,108 |          113,447 |
|         54 |          54 |1556899224743 |    3179 |      366,361,028 |          114,850 |          104,876 |          113,285 |
|         55 |          55 |1556899284744 |    3239 |      366,376,561 |          114,441 |              259 |          111,192 |
|         56 |       ***** |1556899344741 |    3299 |      366,376,561 |          114,441 |                0 |          109,170 |

For last 120  seconds the count has not increased...

Removing sample: 3359|366376561

Total Count: 366,376,561 | Linear Regression Rate:  114,850 | Linear Regression Standard Error: 0.56 | Average Rate: 113,285

Lost connection to m1 during the test; and the spark job stopped.  However, the rate held fairly constant over the 50 minutes of samples above.




#### Sending From Two Test Servers 800k/s


```
bash sendPlanes a41:9092 planes9 planes00000 200 40 2
```


Elastic Index Monitor


|Query Number|Sample Number|Epoch (ms)    |Time (s) |Count             |Linear Reg. Rate  |Rate From Previous|Rate From First   |
|------------|-------------|--------------|---------|------------------|------------------|------------------|------------------|
|          1 |           1 |1556847609139 |       0 |       10,679,675 |                  |                  |                  |
|          2 |           2 |1556847669142 |      60 |       16,523,592 |           97,394 |           97,394 |           97,394 |
|          3 |           3 |1556847729224 |     120 |       26,997,304 |          135,892 |          174,324 |          135,884 |
|          4 |           4 |1556847789421 |     180 |       38,287,172 |          155,268 |          187,549 |          153,135 |
|          5 |           5 |1556847849195 |     240 |       47,950,764 |          160,408 |          161,669 |          155,260 |
|          6 |           6 |1556847909185 |     300 |       60,027,801 |          167,719 |          201,318 |          164,469 |
|          7 |           7 |1556847969139 |     360 |       67,325,084 |          165,409 |          121,715 |          157,348 |
|          8 |           8 |1556848029145 |     420 |       76,548,783 |          163,472 |          153,713 |          156,829 |
|          9 |           9 |1556848089259 |     480 |       83,011,595 |          158,829 |          107,509 |          150,654 |
|         10 |          10 |1556848149137 |     539 |       93,141,803 |          157,029 |          169,181 |          152,708 |
|         11 |          11 |1556848209141 |     600 |      100,889,373 |          154,779 |          129,118 |          150,349 |
|         12 |          12 |1556848269140 |     660 |      108,524,859 |          152,422 |          127,260 |          148,250 |
|         13 |          13 |1556848329177 |     720 |      116,258,466 |          150,218 |          128,814 |          146,629 |
|         14 |          14 |1556848390277 |     781 |      126,837,056 |          149,499 |          173,136 |          148,703 |
|         15 |          15 |1556848450541 |     841 |      136,906,032 |          149,474 |          167,081 |          150,019 |
|         16 |          16 |1556848509228 |     900 |      142,685,087 |          148,359 |           98,472 |          146,658 |
|         17 |          17 |1556848570508 |     961 |      152,364,028 |          147,784 |          157,946 |          147,378 |
|         18 |          18 |1556848629138 |    1019 |      157,947,380 |          146,483 |           95,230 |          144,380 |
|         19 |          19 |1556848689137 |    1079 |      160,000,000 |          143,780 |           34,211 |          138,260 |
|         20 |       ***** |1556848749617 |    1140 |      160,000,000 |          143,780 |                0 |          130,928 |

For last 120  seconds the count has not increased...

Removing sample: 1200|160000000

Total Count: 160,000,000 | Linear Regression Rate:  146,483 | Linear Regression Standard Error: 1.73 | Average Rate: 144,380

